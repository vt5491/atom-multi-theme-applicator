// Generated by CoffeeScript 1.10.0
var $, LocalThemeManager, Utils, jQuery;

LocalThemeManager = require('../lib/local-theme-manager');

Utils = require('../lib/utils');

$ = jQuery = require('jquery');

fdescribe('LocalThemeManager', function() {
  beforeEach(function() {
    var mySpy, packageManager, textEditor, textEditorSpy, themeStyle;
    this.localThemeManager = new LocalThemeManager();
    this.utils = new Utils();
    packageManager = atom.packages;
    mySpy = spyOn(packageManager, "getActivePackages");
    mySpy.andReturn([
      {
        metadata: {
          theme: "syntax",
          name: "test-syntax-theme"
        }
      }
    ]);
    textEditor = atom.workspace.buildTextEditor();
    themeStyle = document.createElement('style');
    themeStyle.setAttribute('source-path', '/tmp/.atom/packages/test-theme/index.less');
    textEditor.getElement().shadowRoot.querySelector('atom-styles').appendChild(themeStyle);
    return textEditorSpy = spyOn(atom.workspace, "getActiveTextEditor").andReturn(textEditor);
  });
  it('ctor works', function() {
    console.log('utils=' + this.localThemeManager.utils);
    return expect(this.localThemeManager.utils).toBeInstanceOf(Utils);
  });
  it('doIt works', function() {
    console.log('local-theme-manager-spec.doIt: testing doIt');
    atom.packages.getActivePackages();
    return expect(this.localThemeManager.doIt()).toEqual(7);
  });
  it('getActiveSyntaxTheme returns proper theme', function() {
    return expect(this.localThemeManager.getActiveSyntaxTheme()).toEqual("test-syntax-theme");
  });
  return fit('deleteThemeNode works', function() {
    var shadowRoot;
    console.log('local-theme-manager-spec: testing deleteThemeNode');
    this.localThemeManager.deleteThemeNode();
    shadowRoot = this.utils.getActiveShadowRoot();
    return expect($(shadowRoot).find('atom-styles').find('style')).not.toExist();
  });
});

//# sourceMappingURL=local-theme-manager-spec.js.map
